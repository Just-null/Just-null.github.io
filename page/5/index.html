<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Just</title><meta name="author" content="Just,3040705657@qq.com"><meta name="copyright" content="Just"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="Just">
<meta property="og:url" content="https://blog.just-null.cn/page/5/index.html">
<meta property="og:site_name" content="Just">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.just-null.cn/img/avatar.jpg">
<meta property="article:author" content="Just">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.just-null.cn/img/avatar.jpg"><link rel="shortcut icon" href="/img/favicon.jpg"><link rel="canonical" href="https://blog.just-null.cn/page/5/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="2JkD1Tl7FTjV415YIPG25-ktxtdeXCZXVqru84Uixy4"/><meta name="baidu-site-verification" content="code-pbcZ2zak1a"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'">  <script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?e7ddaae93d4f07241048bb32e32f85d8";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":2000,"languages":{"author":"作者: Just","link":"链接: ","source":"来源: Just","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-09-02 15:53:59'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><link rel="stylesheet" href="/Just/Just.css"><script src="/Just/rgbaster.min.js"></script><script src="/Just/Just.js"></script><style type="text/css">.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap a{color:#fff;text-decoration:underline;cursor:pointer}</style><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="Just" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">164</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">125</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">102</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa-fw fas fa-book"></i><span> 文库</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 文章标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 文章分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa-fw fas fa-link"></i><span> 网站</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/contact/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></li><li><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page" href="/utils/"><i class="fa-fw fas fa-tools"></i><span> 在线工具</span></a></li></ul></div></div></div></div><div class="page" id="body-wrap"><header class="no-top-img" id="page-header"><nav id="nav"><div id="nav-group"><div id="blog_name"><a id="site-name" href="/">Just</a></div><div id="page-name"><a id="page-name-text" onclick="btf.scrollToDest(0,500)">未来全栈程序猿的博客</a></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa-fw fas fa-book"></i><span> 文库</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 文章标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 文章分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa-fw fas fa-link"></i><span> 网站</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/contact/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></li><li><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page" href="/utils/"><i class="fa-fw fas fa-tools"></i><span> 在线工具</span></a></li></ul></div></div></div><div id="nav-right"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div id="darkmode_navswitch">   <a class="site-page darkmode_switchbutton" title="模式切换"><i class="fas fa-adjust">   </i></a></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav></header><script>window.onload = coverColor()   </script><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/posts/springcloud_eureka.html" title="SpringCloud之Eureka服务注册与发现">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/Just-null/blog_imgs@v3.1/springcloud_eureka.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringCloud之Eureka服务注册与发现"></a></div><a class="article-meta__categories" href="/categories/Eureka/">Eureka        </a><div class="recent-post-info"><a class="article-title" href="/posts/springcloud_eureka.html" title="SpringCloud之Eureka服务注册与发现">SpringCloud之Eureka服务注册与发现</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-06-09T01:07:40.000Z" title="发表于 2021-06-09 09:07:40">2021-06-09</time></span><span class="article-meta tags"><span class="article-meta__separator"></span><a class="article-meta__tags" href="/tags/SpringCloud/">#SpringCloud</a><a class="article-meta__tags" href="/tags/Eureka/">#Eureka</a></span></div><div class="content">Eureka基础知识什么是服务治理Spring Cloud封装了Netflix 公司开发的Eureka模块来实现服务治理，在传统的rpc远程调用框架中，管理每个服务与服务之间依赖关系比较复杂,管理比较复杂，所以需要使用服务治理，管理服务与服务之间依赖关系，可以实现服务调用、负载均衡、容错等,实现服务发现与注册

什么是服务注册
Eureka采用了CS的设计架构，Eureka Server作为服务注册功能的服务器，它是服务注册中心。而系统中的其他微服务,使用Eureka的客户端连接到Eureka Server并维持心跳连接。这样系统的维护人员就可以通过Eureka Server来监控系统中各个微服务是否正常运行。
在服务注册与发现中，有一个注册中心。当服务器启动的时候，会把当前自己服务器的信息比如服务地址通讯地址等以别名方式注册到注册中心上。另-方(消费者|服务提供者)，以该别名的方式去注册中心上获取到实际的服务通讯地址,然后再实现本地RPC调用，远程调用框架核心设计思想，在于注册中心，因为使用注册中心管理每个服务与服务之间的一个依赖关系(服务治理概念)。在任何rpc远程框架中，都会有一 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/posts/springcloud_framework.html" title="微服务架构编码构建">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/Just-null/blog_imgs@v3.1/springcloud_framework.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="微服务架构编码构建"></a></div><a class="article-meta__categories" href="/categories/SpringCloud/">SpringCloud        </a><div class="recent-post-info"><a class="article-title" href="/posts/springcloud_framework.html" title="微服务架构编码构建">微服务架构编码构建</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-06-09T01:04:40.000Z" title="发表于 2021-06-09 09:04:40">2021-06-09</time></span><span class="article-meta tags"><span class="article-meta__separator"></span><a class="article-meta__tags" href="/tags/SpringCloud/">#SpringCloud</a></span></div><div class="content">IDEA新建project工作空间微服务cloud整体聚合工程创建父工程
注解生效激活
父工程POM&lt;properties&gt;        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;        &lt;junit.version&gt;4.12&lt;/junit.version&gt;        &lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt;        &lt;lombok.version&gt;1.18.18&lt;/lombok.version&gt;        &lt;mysql.version&gt;8.0.2 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/posts/springcloud_start.html" title="SpringCloud起步">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/Just-null/blog_imgs@v3.4/Springcloud_start.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringCloud起步"></a></div><a class="article-meta__categories" href="/categories/SpringCloud/">SpringCloud        </a><div class="recent-post-info"><a class="article-title" href="/posts/springcloud_start.html" title="SpringCloud起步">SpringCloud起步</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-06-07T01:02:40.000Z" title="发表于 2021-06-07 09:02:40">2021-06-07</time></span><span class="article-meta tags"><span class="article-meta__separator"></span><a class="article-meta__tags" href="/tags/SpringCloud/">#SpringCloud</a></span></div><div class="content">SpringBoot和SpringCloud在SpringCloud中，使用的版本需要和SpringBoot的版本进行一个匹配，官网)给出的示例如下

本模块中所采用的版本为
SpringCloud中各种组件使用说明



组件名称
采用的技术




服务注册中心
Eureka、Zookeeper、Consul、Nacos


服务调用
Ribbon、LoadBalancer


服务调用2
OpenFeign


服务降级
Hystrix、resiliencej、Alibaba Sentinel


服务网关
gateway


服务配置
Nacos


服务总线
Nacos




三个注册中心的异同点Eureka、Zookeeper、Consul三个注册中心的异同点




组件名
语言
CAP
服务健康检查
对外接暴露
SpringCloud集成




Eureka
Java
AP
可配支持
HTTP
已集成


Consul
Go
CP
支持
HTTP/DNS
已集成


Zookeeper
Java
CP
支持
客户端
已集成





CAP

C: Consiste ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/posts/rabbitmq_distributed.html" title="RabbitMQ分布式事务">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/Just-null/blog_imgs@v2.0/rabbitmq_distributed.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RabbitMQ分布式事务"></a></div><a class="article-meta__categories" href="/categories/RabbitMQ/">RabbitMQ        </a><div class="recent-post-info"><a class="article-title" href="/posts/rabbitmq_distributed.html" title="RabbitMQ分布式事务">RabbitMQ分布式事务</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-23T04:02:40.000Z" title="发表于 2021-04-23 12:02:40">2021-04-23</time></span><span class="article-meta tags"><span class="article-meta__separator"></span><a class="article-meta__tags" href="/tags/RabbitMQ/">#RabbitMQ</a></span></div><div class="content">概述分布式事务指事务的操作位于不同的节点上，需要保证事务的AICD特性。例如在下单场景下，库存和订单如果不在同一个节点上，就涉及分布式事务。

分布式事务的方式两阶段提交(2PC)需要数据库产商的支持，java组件有atomikos等

两阶段提交(Two- phase Commit, 2PC) ，通过引入协调者(Coordinator) 来协调参与者的行为，并最终决定这些参与者是否要真正执行事务
准备阶段协调者询问参与者事务是否执行成功，参与者发回事务执行结果

提交阶段如果事务在每个参与者上都执行成功，事务协调者发送通知让参与者提交事务;否则，协调者发送通知让参与者回滚事务。需要注意的是，在准备阶段,参与者执行了事务，但是还未提交。只有在提交阶段接收到协调者发来的通知后，才进行提交或者回滚。

存在的问题
同步阻塞所有事务参与者在等待其它参与者响应的时候都处于同步阻塞状态,无法进行其它操作。
单点问题协调者在2PC中起到非常大的作用，发生故障将会造成很大影响。特别是在阶段二发生故障，所有参与者会一直等待状态, 无法完成其它操作。
数据不一致在阶段二，如果协调者只发送了部分Commi ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/posts/rabbitmq_colony.html" title="RabbitMQ的集群">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/Just-null/blog_imgs@v2.0/rabbitmq_colony.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RabbitMQ的集群"></a></div><a class="article-meta__categories" href="/categories/RabbitMQ/">RabbitMQ        </a><div class="recent-post-info"><a class="article-title" href="/posts/rabbitmq_colony.html" title="RabbitMQ的集群">RabbitMQ的集群</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-22T04:02:40.000Z" title="发表于 2021-04-22 12:02:40">2021-04-22</time></span><span class="article-meta tags"><span class="article-meta__separator"></span><a class="article-meta__tags" href="/tags/RabbitMQ/">#RabbitMQ</a></span></div><div class="content">概述RabbitMQ这款消息队列中间件产品本身是基于Erlang编写，Erlang语言天生 具备分布式特性(通过同步Erlang集群各节点的magic cookie来实现)。因此，RabbitMQ天然支持Clustering。 这使得RabbitMQ本身不需要像ActiveMQ、Kafka那样通过ZooKeeper分别来实现HA方案和保存集群的元数据。集群是保证可靠性的一种方式，同时可以通过水平扩展以达到增加消息吞吐量能力的目的。在实际使用过程中多采取多机多实例部署方式，为了便于同学们练习搭建，有时候你不得不在一台机器上去搭建一个rabbitmq集群

集群搭建多机多节点搭建集群规划
node1: 10.211.55.5  mq1  master 主节点
node2: 10.211.55.8  mq2  repl1  从节点
node3: 110.211.55.9  mq3  repl2  从节点


三个机器上安装rabbitmq安装步骤：https://blog.just-null.cn/posts/rabbitmq_install.html
配置三台机器主机名和ip映射vim / ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/posts/rabbitmq_dead.html" title="RabbitMQ过期时间和死信队列">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/Just-null/blog_imgs@v2.0/rabbitmq_dead.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RabbitMQ过期时间和死信队列"></a></div><a class="article-meta__categories" href="/categories/RabbitMQ/">RabbitMQ        </a><div class="recent-post-info"><a class="article-title" href="/posts/rabbitmq_dead.html" title="RabbitMQ过期时间和死信队列">RabbitMQ过期时间和死信队列</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-22T03:02:40.000Z" title="发表于 2021-04-22 11:02:40">2021-04-22</time></span><span class="article-meta tags"><span class="article-meta__separator"></span><a class="article-meta__tags" href="/tags/RabbitMQ/">#RabbitMQ</a></span></div><div class="content">过期时间过期时间TTL表示可以对消息设置预期的时间，在这个时间内都可以被消费者接收获取;过了之后消息将自动被删除。RabbitMQ可以对消息和队列设置TTL。目前有两种方法可以设置。

第一种方法是通过队列属性设置， 队列中所有消息都有相同的过期时间。
第二种方法是对消息进行单独设置， 每条消息TTL可以不同。

如果上述两种方法同时使用，则消息的过期时间以两者之间TTL较小的那个数值为准。消息在队列的生存时间一旦超过设置的TTL值，就称为dead message被投递到死信队列，消费者将无法再收到该消息

设置队列TTL代码设置生产者端package com.just.service;import org.springframework.amqp.rabbit.core.RabbitTemplate;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.UUID;@Servicepublic ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/posts/rabbitmq_scene.html" title="RabbitMQ使用场景">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/Just-null/blog_imgs@v2.0/rabbitmq_scene.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RabbitMQ使用场景"></a></div><a class="article-meta__categories" href="/categories/RabbitMQ/">RabbitMQ        </a><div class="recent-post-info"><a class="article-title" href="/posts/rabbitmq_scene.html" title="RabbitMQ使用场景">RabbitMQ使用场景</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-22T02:02:40.000Z" title="发表于 2021-04-22 10:02:40">2021-04-22</time></span><span class="article-meta tags"><span class="article-meta__separator"></span><a class="article-meta__tags" href="/tags/RabbitMQ/">#RabbitMQ</a></span></div><div class="content">解耦、削峰、异步同步异步的问题（串行）串行方式:将订单信息写入数据库成功后，发送注册邮件，再发送注册短信。以上三个任务全部完成后，返回给客户端


public void makeOrder()&#123;	//1.保存订单	orderService.saveOrder();	//2.发送短信服务	messageService.sendSMS(&quot;order&quot;);//1-2s	//3.发送email服务	messgaService.sendEmail(&quot;order&quot;);//1-2s	//4.发送App服务	appService.sendApp(&quot;order&quot;)&#125;
并行方式 异步线程池并行方式:将订单信息写入数据库成功后,发送注册邮件的同时，发送注册短信。以上三个任务完成后,返回给客户端。与串行的差别是，并行的方式可以提高处理的时间


public void makeOrder()&#123;	//1.保存订单	orderService.saveOrder();&#125;public void relationMes ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/posts/rabbitmq_springboot.html" title="SpringtBoot整合RabbitMQ">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/Just-null/blog_imgs@v2.0/rabbitmq_springboot.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringtBoot整合RabbitMQ"></a></div><a class="article-meta__categories" href="/categories/RabbitMQ/">RabbitMQ        </a><div class="recent-post-info"><a class="article-title" href="/posts/rabbitmq_springboot.html" title="SpringtBoot整合RabbitMQ">SpringtBoot整合RabbitMQ</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-22T01:02:40.000Z" title="发表于 2021-04-22 09:02:40">2021-04-22</time></span><span class="article-meta tags"><span class="article-meta__separator"></span><a class="article-meta__tags" href="/tags/RabbitMQ/">#RabbitMQ</a></span></div><div class="content">hello world模型使用搭建初始环境引入依赖&lt;dependency&gt;  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;&lt;/dependency&gt;
配置配置文件spring:  application:    name: rabbitmq-springboot  rabbitmq:    host: 10.211.55.5    port: 5672    username: Just    password: 1234    virtual-host: /just
SpringBoot工程中，RabbitTemplate  用来简化操作     使用时候直接在项目中注入即可使用

创建生产者package com.just.Simple;import com.just.RabbitmqSpringbootApplication;import org.junit.Test ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/posts/rabbitmq_start.html" title="RabbitMQ入门案例">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/Just-null/blog_imgs@v2.0/rabbitmq_start.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RabbitMQ入门案例"></a></div><a class="article-meta__categories" href="/categories/RabbitMQ/">RabbitMQ        </a><div class="recent-post-info"><a class="article-title" href="/posts/rabbitmq_start.html" title="RabbitMQ入门案例">RabbitMQ入门案例</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-21T03:02:40.000Z" title="发表于 2021-04-21 11:02:40">2021-04-21</time></span><span class="article-meta tags"><span class="article-meta__separator"></span><a class="article-meta__tags" href="/tags/RabbitMQ/">#RabbitMQ</a></span></div><div class="content">RabbitMQ入门案例AMQP协议在RabbitMQ中，生产者去RabbitMQ-Server中建立连接，连接建立完成后，生产者会把消息通过通道的方式去传递消息（发送到交换机或者队列中），每一个生产者会对应一个专门的虚拟主机，消费者去虚拟主机中消费对应的数据


AMQP生产者流转过程
AMQP消费者流转过程
RabbitMQ运行流程
RabbitMQ支持的消息模型
RabbitMQ消息模型的使用IDEA创建Maven项目
引入依赖&lt;dependency&gt;    &lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;    &lt;artifactId&gt;amqp-client&lt;/artifactId&gt;    &lt;version&gt;5.10.0&lt;/version&gt;&lt;/dependency&gt;
Hello World(直连模型)模型的使用

P：生产者，也就是要发送消息的程序
C：消费者：消息的接受者，会一直等待消息到来
queue：消息队列，图中红色部分。类似一个邮箱，可以缓存消息；生产者向其中 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/posts/rabbitmq_web.html" title="RabbitMQ Web管理界面及授权操作">     <img class="post_bg" data-lazy-src="https://cdn.jsdelivr.net/gh/Just-null/blog_imgs@v2.0/rabbitmq_web.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RabbitMQ Web管理界面及授权操作"></a></div><a class="article-meta__categories" href="/categories/RabbitMQ/">RabbitMQ        </a><div class="recent-post-info"><a class="article-title" href="/posts/rabbitmq_web.html" title="RabbitMQ Web管理界面及授权操作">RabbitMQ Web管理界面及授权操作</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-04-21T02:02:40.000Z" title="发表于 2021-04-21 10:02:40">2021-04-21</time></span><span class="article-meta tags"><span class="article-meta__separator"></span><a class="article-meta__tags" href="/tags/RabbitMQ/">#RabbitMQ</a></span></div><div class="content">RabbitMQ管理界面默认情况下，rabbitmq是没安装web端的客户端插件，需要安装才可以生效

rabbitmq-plugins enable rabbitmq_management

rabbitmq有一个默认账号和密码：guest 默认情况下只能在localhost本机下访问，所以需要添加一个远程登录用户，或者在rabbitmq配置文件rabbitmq.conf中将loopback_user.guest = false前面的注释取消，即可在其他机器上访问rabbitmq。


访问web管理界面浏览器url输入ip地址:15672进行访问

管理界面
web管理界面介绍overview概览

connections：无论生产者还是消费者，都需要与RabbitMQ建立连接后才可以完成消息的生产和消费，在这里可以查看连接情况

channels：通道，建立连接后，会形成通道，消息的投递获取依赖通道

Exchanges：交换机，用来实现消息的路由

Queues：队列，即消息队列，消息存放在队列中，等待消费，消费后被移除队列



Admin用户和虚拟主机管理添加用户
上面的T ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/4/"><span>上页<i class="fas fa-chevron-left fa-fw"></i></span></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/6/"><span>下页<i class="fas fa-chevron-right fa-fw"></i></span></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Just</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">164</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">125</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">102</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Just-null"><i class="fab fa-github"></i><span>Issue</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://space.bilibili.com/352834955" target="_blank" title=""><i class="iconfont  icon-bilibili"></i></a><a class="social-icon" href="/3040705657@qq.com" target="_blank" title=""><i class="iconfont  icon-email"></i></a><a class="social-icon" href="https://github.com/Just-null" target="_blank" title=""><i class="iconfont  icon-github"></i></a><a class="social-icon" href="https://gitee.com/Just-null" target="_blank" title=""><i class="iconfont  icon-gitee"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">1.编程语言迭代速度很快，本博客有些文章中的技术在现在来说可能已经过时，请读者注意</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/todaystudy.html" title="今日校园信息自动提交（适配昆明学院）"><img data-lazy-src="https://cdn.jsdelivr.net/gh/Just-null/blog_imgs@v3.5/todaystudy.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="今日校园信息自动提交（适配昆明学院）"/></a><div class="content"><a class="title" href="/posts/todaystudy.html" title="今日校园信息自动提交（适配昆明学院）">今日校园信息自动提交（适配昆明学院）</a><time datetime="2021-09-01T01:06:40.000Z" title="发表于 2021-09-01 09:06:40">2021-09-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/springboot_es.html" title="SpringBoot Data操作ElasticSearch"><img data-lazy-src="https://cdn.jsdelivr.net/gh/Just-null/blog_imgs@v3.3/springboot_es.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringBoot Data操作ElasticSearch"/></a><div class="content"><a class="title" href="/posts/springboot_es.html" title="SpringBoot Data操作ElasticSearch">SpringBoot Data操作ElasticSearch</a><time datetime="2021-07-23T02:25:40.000Z" title="发表于 2021-07-23 10:25:40">2021-07-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/java_es.html" title="Java操作ElasticSearch"><img data-lazy-src="https://cdn.jsdelivr.net/gh/Just-null/blog_imgs@v3.3/java_es.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java操作ElasticSearch"/></a><div class="content"><a class="title" href="/posts/java_es.html" title="Java操作ElasticSearch">Java操作ElasticSearch</a><time datetime="2021-07-22T02:25:40.000Z" title="发表于 2021-07-22 10:25:40">2021-07-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ik_start.html" title="IK分词器的使用"><img data-lazy-src="https://cdn.jsdelivr.net/gh/Just-null/blog_imgs@v3.3/ik_start.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="IK分词器的使用"/></a><div class="content"><a class="title" href="/posts/ik_start.html" title="IK分词器的使用">IK分词器的使用</a><time datetime="2021-07-21T02:25:40.000Z" title="发表于 2021-07-21 10:25:40">2021-07-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/es_query.html" title="ElasticSearch高级检索"><img data-lazy-src="https://cdn.jsdelivr.net/gh/Just-null/blog_imgs@v3.3/es_query.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ElasticSearch高级检索"/></a><div class="content"><a class="title" href="/posts/es_query.html" title="ElasticSearch高级检索">ElasticSearch高级检索</a><time datetime="2021-07-21T02:09:40.000Z" title="发表于 2021-07-21 10:09:40">2021-07-21</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/AOP/"><span class="card-category-list-name">AOP</span><span class="card-category-list-count">4</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Alibaba/"><span class="card-category-list-name">Alibaba</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Axios/"><span class="card-category-list-name">Axios</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/BeanUtils/"><span class="card-category-list-name">BeanUtils</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Bus/"><span class="card-category-list-name">Bus</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/CRUD/"><span class="card-category-list-name">CRUD</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/CentOS/"><span class="card-category-list-name">CentOS</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Config/"><span class="card-category-list-name">Config</span><span class="card-category-list-count">1</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 1.18em; color: rgb(147, 74, 9)">C</a><a href="/tags/%E8%AF%BB-%E5%86%99%E6%96%87%E4%BB%B6/" style="font-size: 1.1em; color: rgb(145, 94, 112)">读/写文件</a><a href="/tags/Vue/" style="font-size: 1.34em; color: rgb(55, 107, 62)">Vue</a><a href="/tags/axios/" style="font-size: 1.1em; color: rgb(74, 108, 101)">axios</a><a href="/tags/Docker/" style="font-size: 1.38em; color: rgb(54, 28, 81)">Docker</a><a href="/tags/CentOS/" style="font-size: 1.18em; color: rgb(193, 110, 157)">CentOS</a><a href="/tags/Dockerfile/" style="font-size: 1.1em; color: rgb(16, 166, 80)">Dockerfile</a><a href="/tags/ElasticSearch/" style="font-size: 1.26em; color: rgb(74, 152, 131)">ElasticSearch</a><a href="/tags/Dubbo/" style="font-size: 1.46em; color: rgb(95, 199, 150)">Dubbo</a><a href="/tags/hystrix/" style="font-size: 1.1em; color: rgb(4, 149, 0)">hystrix</a><a href="/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" style="font-size: 1.1em; color: rgb(73, 28, 189)">环境搭建</a><a href="/tags/FastDFS/" style="font-size: 1.22em; color: rgb(115, 155, 49)">FastDFS</a><a href="/tags/Query/" style="font-size: 1.1em; color: rgb(98, 70, 165)">Query</a><a href="/tags/SpringCloud/" style="font-size: 1.5em; color: rgb(132, 66, 118)">SpringCloud</a><a href="/tags/Hystrix/" style="font-size: 1.22em; color: rgb(102, 126, 122)">Hystrix</a><a href="/tags/IK%E5%88%86%E8%AF%8D%E5%99%A8/" style="font-size: 1.1em; color: rgb(75, 16, 65)">IK分词器</a><a href="/tags/Kibana/" style="font-size: 1.1em; color: rgb(167, 152, 129)">Kibana</a><a href="/tags/%E6%95%99%E7%A8%8B/" style="font-size: 1.42em; color: rgb(67, 113, 22)">教程</a><a href="/tags/Jdk/" style="font-size: 1.14em; color: rgb(0, 118, 49)">Jdk</a><a href="/tags/Linux/" style="font-size: 1.14em; color: rgb(182, 79, 49)">Linux</a><a href="/tags/Mysql/" style="font-size: 1.3em; color: rgb(131, 78, 79)">Mysql</a><a href="/tags/RabbitMQ/" style="font-size: 1.3em; color: rgb(153, 183, 12)">RabbitMQ</a><a href="/tags/MacOS/" style="font-size: 1.14em; color: rgb(69, 91, 175)">MacOS</a><a href="/tags/Homebrew/" style="font-size: 1.1em; color: rgb(159, 81, 144)">Homebrew</a><a href="/tags/Redis/" style="font-size: 1.14em; color: rgb(129, 99, 75)">Redis</a><a href="/tags/iTerm/" style="font-size: 1.1em; color: rgb(80, 35, 191)">iTerm</a><a href="/tags/mybatis/" style="font-size: 1.38em; color: rgb(27, 116, 40)">mybatis</a><a href="/tags/%E5%8A%A8%E6%80%81SQL/" style="font-size: 1.1em; color: rgb(30, 152, 26)">动态SQL</a><a href="/tags/Nginx/" style="font-size: 1.22em; color: rgb(97, 105, 187)">Nginx</a><a href="/tags/Promise/" style="font-size: 1.1em; color: rgb(128, 148, 167)">Promise</a><a href="/tags/Python/" style="font-size: 1.14em; color: rgb(66, 67, 111)">Python</a><a href="/tags/%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0/" style="font-size: 1.1em; color: rgb(68, 103, 174)">内置函数</a><a href="/tags/%E5%87%BD%E6%95%B0/" style="font-size: 1.1em; color: rgb(59, 87, 42)">函数</a><a href="/tags/RPC/" style="font-size: 1.1em; color: rgb(174, 100, 16)">RPC</a><a href="/tags/SpringBoot/" style="font-size: 1.46em; color: rgb(105, 71, 53)">SpringBoot</a><a href="/tags/Filter/" style="font-size: 1.1em; color: rgb(11, 163, 54)">Filter</a><a href="/tags/RESTFul/" style="font-size: 1.1em; color: rgb(13, 94, 138)">RESTFul</a><a href="/tags/Servlet/" style="font-size: 1.1em; color: rgb(44, 135, 142)">Servlet</a><a href="/tags/%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81/" style="font-size: 1.1em; color: rgb(73, 87, 37)">字符编码</a><a href="/tags/Logback/" style="font-size: 1.1em; color: rgb(109, 185, 175)">Logback</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/09/"><span class="card-archive-list-date">2021年09月</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/07/"><span class="card-archive-list-date">2021年07月</span><span class="card-archive-list-count">30</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/06/"><span class="card-archive-list-date">2021年06月</span><span class="card-archive-list-count">12</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/04/"><span class="card-archive-list-date">2021年04月</span><span class="card-archive-list-count">22</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">2021年03月</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/02/"><span class="card-archive-list-date">2021年02月</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/01/"><span class="card-archive-list-date">2021年01月</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/12/"><span class="card-archive-list-date">2020年12月</span><span class="card-archive-list-count">22</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">164</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2020-03-18T16:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">349.4k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-09-02T07:53:56.764Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Just</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi,welcome to my blog!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      true && mermaid.init()
    })
  }
}</script></div><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  if (typeof gtag === 'function') {
    gtag('config', '', {'page_path': window.location.pathname});
  }

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script async>window.onload=function(){var a=document.createElement('script'),b=document.getElementsByTagName('script')[0];a.type='text/javascript',a.async=!0,a.src='/sw-register.js?v='+Date.now(),b.parentNode.insertBefore(a,b)};</script></body></html>